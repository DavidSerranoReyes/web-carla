---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header';
import Footer from '../components/Footer';
import CVDownload from '../components/CVDownload';

const base = import.meta.env.BASE_URL;
---

<Layout title="Bio - Carla">
  <div transition:persist="header">
    <Header client:load />
  </div>

  <main class="bio-main" transition:animate="slide">
    <!-- Foto de Perfil -->
    <section class="profile-hero">
      <div class="profile-image-container">
        <img
          src={`${base}images/bio/profile.jpg`}
          alt="Carla Larrea Sánchez"
          class="profile-image"
        />
      </div>
      <h1 class="profile-name">Carla Larrea Sánchez</h1>
    </section>

    <!-- Bio con imágenes integradas -->
    <div class="bio-scroll-container">
      <!-- Párrafo 1 -->
      <section class="bio-section">
        <div class="text-content">
          <p class="bio-text" data-lang-es>
            Soy mujer, latinoamericana, andina, cineasta, activista por los derechos humanos con
            perspectiva de género interseccional, antirracista y decolonial. Soy directora, editora,
            productora y guionista. Considero al cine y el audiovisual como herramientas de posibles
            reflexiones y transformaciones sociales.
          </p>
          <p class="bio-text" data-lang-en style="display: none;">
            I am a woman, Latin American, Andean, filmmaker, and human rights activist with an
            intersectional, anti-racist, and decolonial gender perspective. I am a director, editor,
            producer, and screenwriter. I consider cinema and audiovisual media as tools for
            possible reflections and social transformations.
          </p>
        </div>
        <div class="image-background image-left">
          <img src={`${base}images/bio/gallery4.jpg`} alt="Gallery 4" />
        </div>
      </section>

      <!-- Párrafo 2 -->
      <section class="bio-section">
        <div class="text-content">
          <p class="bio-text" data-lang-es>
            Soy graduada del Centro de Capacitación Cinematográfica (México) y Magíster en Derechos
            Humanos por la Universidad Regional del Noroeste del Estado de Rio Grande do Sul
            (Brasil). Fui residente de COOFILM, segunda edición (España), y he participado en varios
            laboratorios y mercados de cine y audiovisual desde el 2018, como directora, guionista y
            productora.
          </p>
          <p class="bio-text" data-lang-en style="display: none;">
            I graduated from the Centro de Capacitación Cinematográfica (Mexico) and hold a Master's
            degree in Human Rights from the Regional University of Northwestern Rio Grande do Sul
            (Brazil). I was a resident of COOFILM, second edition (Spain), and have participated in
            various film and audiovisual laboratories and markets since 2018, as a director,
            screenwriter, and producer.
          </p>
        </div>
        <div class="image-background image-right">
          <img src={`${base}images/bio/gallery2.jpg`} alt="Gallery 2" />
        </div>
      </section>

      <!-- Párrafo 3 -->
      <section class="bio-section">
        <div class="text-content">
          <p class="bio-text" data-lang-es>
            He sido jurado de varios premios y festivales tanto en Ecuador (Festival de Cine de
            Guayaquil, Premio Ernesto Albán del Municipio de Quito) como en el extranjero
            (Ceceachero Film Festival, 8º CBFF Festival Internacional en Vigo, FENACIR).
          </p>
          <p class="bio-text" data-lang-en style="display: none;">
            I have served as a jury member for several awards and festivals both in Ecuador
            (Guayaquil Film Festival, Ernesto Albán Award from the Municipality of Quito) and abroad
            (Ceceachero Film Festival, 8º CBFF International Festival in Vigo, FENACIR).
          </p>
        </div>
        <div class="image-background image-left">
          <img src={`${base}images/bio/gallery7.jpg`} alt="Gallery 7" />
        </div>
      </section>

      <!-- Párrafo 4 -->
      <section class="bio-section">
        <div class="text-content">
          <p class="bio-text" data-lang-es>
            También me desempeño como investigadora y docente universitaria. Desde septiembre de
            2025, trabajo como docente en las carreras de Educación Básica y Educación Inicial de la
            Universidad Politécnica Estatal del Carchi, dictando las asignaturas de Derechos Humanos
            y Derechos Humanos y Educación.
          </p>
          <p class="bio-text" data-lang-en style="display: none;">
            I also work as a researcher and university professor. Since September 2025, I have been
            teaching in the Basic Education and Early Childhood Education programs at the State
            Polytechnic University of Carchi, delivering courses on Human Rights and Human Rights
            and Education.
          </p>
        </div>
        <div class="image-background image-right">
          <img src={`${base}images/bio/gallery8.jpg`} alt="Gallery 8" />
        </div>
      </section>

      <!-- Párrafo 5 -->
      <section class="bio-section">
        <div class="text-content">
          <p class="bio-text" data-lang-es>
            En mi ejercicio profesional articulo el arte, especialmente el cine, la academia y los
            Derechos Humanos para gestar proyectos sociales y cinematográficos interseccionales e
            interdisciplinarios desde una perspectiva decolonial, anticapitalista y antipatriarcal.
          </p>
          <p class="bio-text" data-lang-en style="display: none;">
            In my professional practice, I articulate art, especially cinema, academia, and Human
            Rights to create intersectional and interdisciplinary social and cinematographic
            projects from a decolonial, anti-capitalist, and anti-patriarchal perspective.
          </p>
        </div>
        <div class="image-background image-left">
          <img src={`${base}images/bio/gallery3.jpg`} alt="Gallery 3" />
        </div>
      </section>
    </div>

    <!-- CV Section con imagen -->
    <section class="cv-section-container">
      <div class="cv-content">
        <h2 class="cv-title" data-lang-es>Curriculum Vitae</h2>
        <h2 class="cv-title" data-lang-en style="display: none;">Curriculum Vitae</h2>
        <CVDownload client:load />
      </div>
      <div class="image-background image-right">
        <img src={`${base}images/bio/gallery5.jpg`} alt="Gallery 5" />
      </div>
    </section>
  </main>

  <div transition:persist="footer">
    <Footer />
  </div>
</Layout>

<script>
  function initBioPage() {
    // Scroll animations (portfolio style)
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px',
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-in');
        }
      });
    }, observerOptions);

    // Observe all animated elements
    document.querySelectorAll('.bio-section, .cv-section-container, .profile-hero').forEach((section) => {
      observer.observe(section);
    });

    // Language toggle
    function updateLanguage() {
      const lang = localStorage.getItem('language') || 'es';

      document.querySelectorAll('[data-lang-es]').forEach((el) => {
        (el as HTMLElement).style.display = lang === 'es' ? '' : 'none';
      });

      document.querySelectorAll('[data-lang-en]').forEach((el) => {
        (el as HTMLElement).style.display = lang === 'en' ? '' : 'none';
      });
    }

    updateLanguage();
    window.addEventListener('storage', updateLanguage);
  }

  // Inicializar al cargar la página
  initBioPage();

  // Re-inicializar después de las transiciones de Astro
  document.addEventListener('astro:after-swap', initBioPage);
</script>

<style>
  .bio-main {
    min-height: 100vh;
    padding-top: 80px;
    position: relative;
    overflow-x: hidden;
    width: auto;
    max-width: 100%;
  }

  /* Asegurar que body no tenga scroll horizontal */
  :global(body) {
    overflow-x: hidden;
    width: 100%;
  }

  /* Profile Hero Section */
  .profile-hero {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 60vh;
    padding: var(--spacing-xl) var(--spacing-md);
    margin-bottom: var(--spacing-xl);
  }

  .profile-image-container {
    position: relative;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    overflow: hidden;
    border: 5px solid var(--color-accent);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    margin-bottom: var(--spacing-lg);
    transition: all var(--transition-normal);
    animation: fadeIn 1s ease-out;
  }

  .profile-image-container:hover {
    transform: scale(1.05);
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
  }

  .profile-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-slow);
  }

  .profile-image-container:hover .profile-image {
    transform: scale(1.1);
  }

  .profile-name {
    font-size: 3rem;
    text-align: center;
    font-weight: 700;
    animation: fadeIn 1.2s ease-out;
    background: linear-gradient(135deg, var(--color-text) 0%, var(--color-accent) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Bio Scroll Container */
  .bio-scroll-container {
    position: relative;
    width: auto;
    max-width: 100%;
    overflow-x: hidden;
  }
  /* Prevent double scrollbars on mobile */
  @media (max-width: 768px) {
    .bio-main,
    .bio-scroll-container,
    .bio-section,
    .cv-section-container {
      width: auto !important;
      max-width: 100% !important;
      overflow-x: hidden !important;
    }
    html, body {
      width: 100vw !important;
      max-width: 100vw !important;
      overflow-x: hidden !important;
    }
  }

  /* Bio Sections */
  .bio-section {
    position: relative;
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl) var(--spacing-md);
    margin-bottom: var(--spacing-xl);
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  /* Text Content */
  .text-content {
    position: relative;
    z-index: 2;
    max-width: 700px;
    margin: 0 auto;
    padding: var(--spacing-xl);
    background: rgba(0, 0, 0, 0.85);
    border-radius: var(--radius-lg);
    backdrop-filter: blur(15px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #ffffff;
  }

  :global([data-theme='light']) .text-content {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(15px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
    border: 1px solid rgba(0, 0, 0, 0.08);
    color: #1a1a1a;
  }

  .bio-text {
    font-size: 1.15rem;
    line-height: 1.8;
    margin: 0;
  }

  .text-content .bio-text {
    color: inherit;
  }

  /* Image Backgrounds */
  .image-background {
    position: absolute;
    top: 0;
    width: 55%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
  }

  /* Light mode - bordes redondeados que persisten */
  :global([data-theme='light']) .image-background {
    border-radius: var(--radius-lg);
  }

  .image-left {
    left: 0;
  }

  .image-right {
    right: 0;
  }

  .image-background img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .bio-section:hover .image-background img {
    transform: scale(1.05);
  }

  /* Gradient overlays */
  .image-background::after {
    content: '';
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2;
  }

  .image-left::after {
    right: 0;
    left: auto;
    background: linear-gradient(
      to right,
      rgba(0, 0, 0, 0) 0%,
      rgba(0, 0, 0, 0.3) 40%,
      rgba(0, 0, 0, 1) 100%
    );
  }

  .image-right::after {
    left: 0;
    right: auto;
    background: linear-gradient(
      to left,
      rgba(0, 0, 0, 0) 0%,
      rgba(0, 0, 0, 0.3) 40%,
      rgba(0, 0, 0, 1) 100%
    );
  }

  /* Light mode - remover gradientes oscuros y agregar blancos */
  :global([data-theme='light']) .image-left::after {
    background: linear-gradient(
      to left,
      rgba(255, 255, 255, 0.95) 0%,
      rgba(255, 255, 255, 0.8) 20%,
      rgba(255, 255, 255, 0.5) 40%,
      rgba(255, 255, 255, 0) 70%
    );
  }

  :global([data-theme='light']) .image-right::after {
    background: linear-gradient(
      to right,
      rgba(255, 255, 255, 0.95) 0%,
      rgba(255, 255, 255, 0.8) 20%,
      rgba(255, 255, 255, 0.5) 40%,
      rgba(255, 255, 255, 0) 70%
    );
  }

  /* Image Only Sections */
  .bio-section.image-only {
    min-height: 70vh;
    padding: 0;
    margin-bottom: var(--spacing-xl);
  }

  .image-full {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
  }

  .image-full::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0.1) 50%,
      rgba(0, 0, 0, 0.3) 100%
    );
    pointer-events: none;
  }

  :global([data-theme='light']) .image-full::after {
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.2) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      rgba(255, 255, 255, 0.2) 100%
    );
  }

  .image-full img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .bio-section.image-only:hover .image-full img {
    transform: scale(1.08);
  }

  /* CV Section */
  .cv-section-container {
    position: relative;
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl) var(--spacing-md);
    margin-top: var(--spacing-xl);
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .cv-content {
    position: relative;
    z-index: 2;
    max-width: 700px;
    margin: 0 auto;
    text-align: center;
    padding: var(--spacing-xl);
    background: rgba(0, 0, 0, 0.85);
    border-radius: var(--radius-lg);
    backdrop-filter: blur(15px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    border: 2px solid var(--color-border);
    transition: all var(--transition-normal);
    color: #ffffff;
  }

  :global([data-theme='light']) .cv-content {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(15px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
    border: 1px solid rgba(0, 0, 0, 0.08);
    color: #1a1a1a;
  }

  .cv-content:hover {
    border-color: var(--color-accent);
    transform: translateY(-5px);
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
  }

  :global([data-theme='light']) .cv-content:hover {
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.25);
  }

  .cv-section-container .image-background {
    z-index: 1;
  }

  .cv-section-container:hover .image-background img {
    transform: scale(1.05);
  }

  .cv-title {
    font-size: 2rem;
    margin-bottom: var(--spacing-lg);
  }

  .cv-content .cv-title {
    color: inherit;
    font-weight: 700;
  }

  /* Animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .image-background {
      width: 50%;
    }
  }

  @media (max-width: 768px) {
    .bio-main {
      padding-top: 100px;
    }

    .profile-image-container {
      width: 220px;
      height: 220px;
    }

    .profile-name {
      font-size: 2rem;
    }

    .bio-section {
      min-height: 60vh;
      padding: var(--spacing-lg) var(--spacing-sm);
    }

    .text-content {
      padding: var(--spacing-lg);
      max-width: 90%;
    }

    .bio-text {
      font-size: 1rem;
    }

    .image-background {
      width: 100%;
      opacity: 0.3;
    }

    .image-left,
    .image-right {
      left: 0;
      right: 0;
    }

    .cv-section-container {
      padding: var(--spacing-lg) var(--spacing-sm);
    }

    .cv-content {
      padding: var(--spacing-lg);
    }

    .cv-title {
      font-size: 1.5rem;
    }

    /* Scroll animations for mobile */
    .profile-hero {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .profile-hero.animate-in {
      opacity: 1;
      transform: translateY(0);
    }

    .bio-section,
    .cv-section-container {
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 0.7s ease, transform 0.7s ease;
    }

    .bio-section.animate-in,
    .cv-section-container.animate-in {
      opacity: 1;
      transform: translateY(0);
    }

    /* Animate text and images separately for better effect */
    .bio-section.animate-in .text-content {
      animation: slideInLeft 0.6s ease forwards;
    }

    .bio-section.animate-in .image-background {
      animation: fadeInScale 0.8s ease forwards;
    }

    .cv-section-container.animate-in .cv-content {
      animation: popIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 0.3;
        transform: scale(1);
      }
    }

    @keyframes popIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
  }
      font-size: 1.5rem;
    }
  }
</style>
